# TIMEOUT Hotel Management - Admin Panel Guide

## Обзор

Создана полноценная административная панель для управления системой бронирования отелей TIMEOUT.

## Созданные компоненты

### 1. Аутентификация и безопасность
- ✅ JWT-based аутентификация
- ✅ Middleware для защиты админских роутов
- ✅ API endpoints для login/register/logout
- ✅ Хэширование паролей с использованием bcryptjs
- ✅ Проверка ролей (ADMIN, MANAGER, CUSTOMER)

### 2. Страницы админ-панели

#### Dashboard (`/admin`)
- Статистика по отелям, номерам, бронированиям
- Общая выручка
- Активные бронирования
- Количество пользователей

#### Управление отелями (`/admin/hotels`)
- Просмотр списка всех отелей
- Информация о местоположении и статусе
- Удаление отелей
- Интеграция с адресами и городами

#### Управление номерами (`/admin/rooms`)
- Список всех номеров
- Информация о типе номера и цене
- Статус доступности
- Связь с отелями

#### Управление бронированиями (`/admin/bookings`)
- Просмотр всех бронирований
- Информация о гостях и датах
- Статусы бронирований
- Цены и скидки

#### Управление пользователями (`/admin/users`)
- Список всех пользователей
- Роли (Admin, Manager, Customer)
- Статистика по бронированиям и отзывам
- Статус активности

#### Управление отзывами (`/admin/reviews`)
- Модерация отзывов
- Одобрение/отклонение
- Рейтинги отелей
- Информация о авторах

#### Управление скидками (`/admin/discounts`)
- Создание промокодов
- Типы скидок (процент/фиксированная сумма)
- Даты действия
- Лимиты использования
- Статистика использования

## API Endpoints

### Аутентификация
- `POST /api/auth/login` - Вход в систему
- `POST /api/auth/register` - Регистрация
- `POST /api/auth/logout` - Выход
- `GET /api/auth/me` - Получение текущего пользователя

### Админ API
- `GET /api/admin/stats` - Статистика дашборда
- `GET /api/admin/hotels` - Список отелей
- `GET /api/admin/hotels/[id]` - Детали отеля
- `DELETE /api/admin/hotels/[id]` - Удаление отеля
- `GET /api/admin/rooms` - Список номеров
- `DELETE /api/admin/rooms/[id]` - Удаление номера
- `GET /api/admin/bookings` - Список бронирований
- `GET /api/admin/users` - Список пользователей
- `GET /api/admin/reviews` - Список отзывов
- `POST /api/admin/reviews/[id]/approve` - Одобрение отзыва
- `DELETE /api/admin/reviews/[id]` - Удаление отзыва
- `GET /api/admin/discounts` - Список скидок
- `DELETE /api/admin/discounts/[id]` - Удаление скидки

## Первые шаги

### 1. Создание первого администратора

Вам нужно создать первого администратора вручную в базе данных:

```typescript
// Используйте Prisma Studio или SQL запрос
npx prisma studio

// Или создайте пользователя с ролью ADMIN через скрипт
```

Или создайте seed скрипт:

```typescript
import { PrismaClient } from '@/app/generated/prisma';
import { hashPassword } from '@/app/lib/auth';

const prisma = new PrismaClient();

async function main() {
  const passwordHash = await hashPassword('admin123');

  await prisma.user.create({
    data: {
      email: 'admin@timeout.com',
      passwordHash,
      firstName: 'Admin',
      lastName: 'User',
      role: 'ADMIN',
    },
  });
}

main();
```

### 2. Вход в админ-панель

1. Перейдите на `/auth/login`
2. Введите данные администратора
3. После успешного входа вы будете перенаправлены на `/admin`

### 3. Настройка переменных окружения

Убедитесь, что в `.env` файле настроены:

```env
DATABASE_URL='your-database-url'
JWT_SECRET='your-secret-key-change-in-production'
```

## Безопасность

### Middleware
- Все роуты `/admin/*` защищены middleware
- Проверка JWT токена
- Проверка роли пользователя (только ADMIN и MANAGER)
- Автоматическое перенаправление неавторизованных пользователей

### Роли
- **CUSTOMER** - обычный пользователь (нет доступа к админке)
- **MANAGER** - менеджер (доступ к админке, ограниченные права)
- **ADMIN** - администратор (полный доступ)

## UI/UX Особенности

### Адаптивный дизайн
- Полностью адаптивная верстка
- Мобильное меню для маленьких экранов
- Responsive таблицы

### Навигация
- Боковое меню с иконками
- Активная подсветка текущей страницы
- Быстрый доступ к основным разделам

### Стиль
- Дизайн в стиле бренда TIMEOUT
- Цветовая схема: #C9A56B (золотой акцент)
- Использование шрифтов Geist и Playfair Display

## Технологии

- **Next.js 15** - React фреймворк
- **Prisma 7** - ORM для работы с БД
- **PostgreSQL** - База данных (Neon)
- **bcryptjs** - Хэширование паролей
- **jose** - JWT токены
- **Tailwind CSS** - Стилизация
- **Lucide React** - Иконки
- **React Hook Form** - Формы

## Дальнейшее развитие

Рекомендуемые улучшения:

1. **Страницы создания/редактирования**
   - Форма добавления нового отеля
   - Форма редактирования номера
   - Форма создания скидки

2. **Улучшенная аналитика**
   - Графики и диаграммы
   - Экспорт данных
   - Фильтрация и поиск

3. **Уведомления**
   - Toast notifications
   - Email уведомления
   - Push notifications

4. **Загрузка изображений**
   - Upload для фото отелей
   - Менеджер изображений
   - Оптимизация картинок

5. **Расширенные права**
   - Детальная настройка прав для MANAGER
   - Логирование действий админов
   - Аудит изменений

## Поддержка

Для вопросов и предложений создайте issue в репозитории проекта.
